{"version":3,"file":"worker-schedule.js","sources":["pages/worker-schedule/worker-schedule.vue","../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd29ya2VyLXNjaGVkdWxlL3dvcmtlci1zY2hlZHVsZS52dWU"],"sourcesContent":["<template>\n    <view class=\"page-container\">\n        <view class=\"date-selector-container\">\n            <scroll-view class=\"scroll-view\" scroll-x=\"true\" show-scrollbar=\"false\" :scroll-into-view=\"scrollIntoViewId\">\n                <view\n                    v-for=\"(day, index) in availableDays\"\n                    :key=\"index\"\n                    :id=\"day.id\"\n                    class=\"day-item\"\n                    :class=\"{ 'active-day': selectedDate === day.dateString }\"\n                    @click=\"selectDate(day.dateString)\"\n                >\n                    <view class=\"day-name\">{{ day.name }}</view>\n                    <view class=\"day-date\">{{ day.shortDate }}</view>\n                </view>\n            </scroll-view>\n        </view>\n\n        <view class=\"time-slot-container\">\n            <view v-if=\"isLoading\" class=\"loading-container\">\n                <uni-load-more status=\"loading\"></uni-load-more>\n            </view>\n            \n            <view v-else-if=\"timeSlots.length === 0\" class=\"empty-container\">\n                <image src=\"/static/images/empty-box.png\" class=\"empty-image\"></image>\n                <text class=\"empty-text\">当日暂无预约</text>\n            </view>\n            \n            <view v-else class=\"time-slot-grid\">\n                <view\n                    v-for=\"(slot, index) in timeSlots\"\n                    :key=\"index\"\n                    class=\"time-slot-item\"\n                    :class=\"{ \n                        'booked-slot': slot.isBooked,\n                        'past-slot': slot.isPast,\n                        'cancelled-slot': slot.isCancelled,\n                    }\"\n                    @click=\"selectTimeSlot(slot)\"\n                >\n                    <text class=\"time-text\">{{ slot.time }}</text>\n                    <text v-if=\"slot.isBooked\" class=\"booked-badge\" :class=\"{'cancelled-badge': slot.isCancelled}\">\n                        {{ slot.isCancelled ? '已取消' : '已预约' }}\n                    </text>\n                </view>\n            </view>\n        </view>\n\n        <view v-if=\"selectedAppointment\" class=\"modal-mask\" @click=\"closeModal\">\n            <view class=\"modal-container\" @click.stop>\n                <view class=\"modal-header\">\n                    <text class=\"modal-title\">预约详情</text>\n                </view>\n                \n                <view class=\"modal-content\">\n                    <view class=\"detail-item\">\n                        <uni-icons type=\"calendar\" size=\"20\" color=\"#666\" />\n                        <text class=\"detail-label\">服务时间：</text>\n                        <text class=\"detail-value\">{{ selectedAppointment.serviceDate }} {{ selectedAppointment.serviceHour }}</text>\n                    </view>\n                    <view class=\"detail-item\">\n                        <uni-icons type=\"person\" size=\"20\" color=\"#666\" />\n                        <text class=\"detail-label\">客户姓名：</text>\n                        <text class=\"detail-value\">{{ selectedAppointment.userName }}</text>\n                    </view>\n                    <view class=\"detail-item\">\n                        <uni-icons type=\"phone\" size=\"20\" color=\"#666\" />\n                        <text class=\"detail-label\">联系电话：</text>\n                        <text class=\"detail-value phone\" @click=\"makePhoneCall(selectedAppointment.userPhone)\">\n                            {{ selectedAppointment.userPhone }}\n                        </text>\n                    </view>\n\n                    <view class=\"detail-item\" v-if=\"selectedAppointment.serviceAddress\">\n                        <uni-icons type=\"location\" size=\"20\" color=\"#666\" />\n                        <text class=\"detail-label\">服务地址：</text>\n                        <text class=\"detail-value address-text\">{{ selectedAppointment.serviceAddress.address }}{{ selectedAppointment.serviceAddress.detail }}</text>\n                        <button class=\"nav-btn\" @click.stop=\"navigateToLocation(selectedAppointment.serviceAddress)\">导航</button>\n                    </view>\n\n                    <view class=\"detail-item\">\n                        <uni-icons type=\"chat\" size=\"20\" color=\"#666\" />\n                        <text class=\"detail-label\">服务需求：</text>\n                    </view>\n                    <view class=\"remark-container\">\n                        <text class=\"remark-text\">{{ selectedAppointment.remark }}</text>\n                    </view>\n                </view>\n                \n                <view class=\"modal-footer\">\n                    <button v-if=\"selectedAppointment.status === 'confirmed'\" class=\"action-btn cancel-btn\" @click=\"handleCancel(selectedAppointment)\">取消此预约</button>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script setup>\n// 【新增】导入 nextTick 用于确保 DOM 更新后执行滚动\nimport { ref, nextTick } from 'vue';\nimport { onShow } from '@dcloudio/uni-app';\n\nconst availableDays = ref([]);\nconst timeSlots = ref([]);\nconst selectedDate = ref('');\nconst isLoading = ref(false);\nconst appointments = ref([]);\nconst selectedAppointment = ref(null);\n// 【新增】用于控制 scroll-view 滚动到指定ID的元素\nconst scrollIntoViewId = ref('');\n\nonShow(() => {\n    const userInfo = uni.getStorageSync('userinfo');\n    if (!userInfo || !userInfo._id) {\n         uni.showToast({ title: '请先登录', icon: 'none' });\n         uni.navigateTo({ url: '/pages/login/login' });\n         return;\n    }\n\n    // 【修改】调整页面加载逻辑，确保总是默认选中今天\n    if (availableDays.value.length === 0) {\n        generateAvailableDays();\n        \n        // 1. 生成今天的日期字符串\n        const today = new Date();\n        const yyyy = today.getFullYear();\n        const mm = String(today.getMonth() + 1).padStart(2, '0');\n        const dd = String(today.getDate()).padStart(2, '0');\n        const todayDateString = `${yyyy}-${mm}-${dd}`;\n        \n        // 2. 默认选中今天\n        selectDate(todayDateString);\n\n        // 3. 滚动到今天的位置\n        nextTick(() => {\n            const todayItem = availableDays.value.find(day => day.dateString === todayDateString);\n            if (todayItem) {\n                // 将 scroll-view 滚动到ID为今天日期的元素\n                scrollIntoViewId.value = todayItem.id;\n            }\n        });\n\n    } else {\n        // 如果是从其他页面返回，则刷新当前选中的日期\n        fetchAppointmentsForDate(selectedDate.value);\n    }\n});\n\n/**\n * 【修改】生成可用的日期列表\n * 扩展为过去4天 + 今天 + 未来4天\n */\nconst generateAvailableDays = () => {\n    const days = [];\n    const today = new Date();\n    const specialNames = {\n        '-2': '前天',\n        '-1': '昨天',\n        '0': '今天',\n        '1': '明天',\n        '2': '后天'\n    };\n    const weekNames = ['周日','周一','周二','周三','周四','周五','周六'];\n    \n    // 循环从过去4天(-4)到未来4天(+4)\n    for (let i = -4; i <= 4; i++) {\n        const d = new Date(today);\n        d.setDate(today.getDate() + i);\n        \n        const yyyy = d.getFullYear();\n        const mm = String(d.getMonth() + 1).padStart(2, '0');\n        const dd = String(d.getDate()).padStart(2, '0');\n        const dateString = `${yyyy}-${mm}-${dd}`;\n\n        days.push({\n            // 优先使用特殊名称，否则使用星期名称\n            name: specialNames[i] || weekNames[d.getDay()],\n            shortDate: `${mm}-${dd}`,\n            dateString: dateString,\n            // 【新增】为每个日期项设置一个唯一的ID，用于滚动定位\n            id: 'day' + dateString.replace(/-/g, '')\n        });\n    }\n    availableDays.value = days;\n};\n\nconst generateStandardTimeSlots = () => {\n    const slots = [];\n    for (let i = 9; i <= 18; i++) {\n        slots.push({ time: `${String(i).padStart(2,'0')}:00`, isBooked: false, isPast: false, isCancelled: false, appointment: null });\n    }\n    return slots;\n};\n\nconst selectDate = async (dateString) => {\n    selectedDate.value = dateString;\n    await fetchAppointmentsForDate(dateString);\n};\n\nconst fetchAppointmentsForDate = async (date) => {\n    isLoading.value = true;\n    timeSlots.value = [];\n    try {\n        const userInfo = uni.getStorageSync('userinfo') || {};\n        const workerId = userInfo._id;\n        if (!workerId) throw new Error('无法获取工人ID，请重新登录');\n        \n        const res = await uniCloud.callFunction({\n            name: 'getAppointmentsForWorker',\n            data: { workerId, date }\n        });\n\n        if (res.result.success) {\n            appointments.value = res.result.data;\n            updateTimeSlots(date);\n        } else {\n            throw new Error(res.result.message || '加载预约失败');\n        }\n    } catch (err) {\n        console.error(err);\n        uni.showToast({ title: err.message, icon: 'none' });\n        timeSlots.value = generateStandardTimeSlots();\n    } finally {\n        isLoading.value = false;\n    }\n};\n\nconst updateTimeSlots = (date) => {\n    const now = new Date();\n    const todayStr = now.toISOString().slice(0,10);\n    const currentHour = now.getHours();\n    timeSlots.value = generateStandardTimeSlots().map(slot => {\n        const h = parseInt(slot.time.split(':')[0]);\n        const isPast = (date < todayStr) || (date === todayStr && h < currentHour);\n        const app = appointments.value.find(a => a.serviceHour === slot.time);\n        return { \n            ...slot, \n            isBooked: !!app, \n            isPast, \n            appointment: app,\n            isCancelled: app ? app.status !== 'confirmed' : false\n        };\n    });\n};\n\nconst selectTimeSlot = slot => {\n    if (!slot.isBooked) return;\n    selectedAppointment.value = slot.appointment;\n};\n\nconst handleCancel = (appointment) => {\n    uni.showModal({\n        title: '取消预约',\n        editable: true,\n        placeholderText: '请输入取消原因（必填）',\n        success: async (res) => {\n            if (res.confirm) {\n                const reason = res.content;\n                if (!reason.trim()) {\n                    uni.showToast({ title: '必须填写取消原因', icon: 'none' });\n                    return;\n                }\n                \n                uni.showLoading({ title: '正在提交...' });\n                try {\n                    const userInfo = uni.getStorageSync('userinfo') || {};\n                    const workerPhone = userInfo.phoneNumber;\n\n                    const cancelRes = await uniCloud.callFunction({\n                        name: 'cancelAppointmentByWorker',\n                        data: { \n                            appointmentId: appointment._id,\n                            workerPhone: workerPhone,\n                            cancellationReason: reason\n                        }\n                    });\n\n                    uni.hideLoading();\n                    if (cancelRes.result.success) {\n                        uni.showToast({ title: '取消成功', icon: 'success' });\n                        closeModal();\n                        fetchAppointmentsForDate(selectedDate.value);\n                    } else {\n                        throw new Error(cancelRes.result.message || '取消失败');\n                    }\n                } catch (error) {\n                    uni.hideLoading();\n                    uni.showToast({ title: error.message, icon: 'none' });\n                }\n            }\n        }\n    });\n};\n\nconst closeModal = () => {\n    selectedAppointment.value = null;\n};\n\nconst makePhoneCall = num => uni.makePhoneCall({ phoneNumber: num });\n\nconst navigateToLocation = (serviceAddress) => {\n    if (!serviceAddress || !serviceAddress.latitude || !serviceAddress.longitude) {\n        uni.showToast({\n            title: '地址信息不完整',\n            icon: 'none'\n        });\n        return;\n    }\n    uni.openLocation({\n        latitude: serviceAddress.latitude,\n        longitude: serviceAddress.longitude,\n        name: serviceAddress.name,\n        address: serviceAddress.address + serviceAddress.detail,\n        fail: (err) => {\n            uni.showToast({\n                title: '打开地图失败',\n                icon: 'none'\n            });\n            console.error('uni.openLocation failed:', err);\n        }\n    });\n};\n</script>\n\n<style scoped lang=\"scss\">\n.page-container {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    background: #f8f8f8;\n    padding: 20rpx;\n}\n\n.date-selector-container {\n    background: #fff;\n    border-radius: 16rpx;\n    padding: 20rpx;\n    margin-bottom: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.05);\n\n    .scroll-view {\n        white-space: nowrap;\n        width: 100%;\n    }\n\n    .day-item {\n        display: inline-block;\n        text-align: center;\n        padding: 20rpx 30rpx;\n        margin-right: 20rpx;\n        border-radius: 16rpx;\n        background: #f7f7f7;\n        transition: all .3s;\n\n        &.active-day {\n            background: #30d158;\n            color: #fff;\n        }\n\n        .day-name {\n            font-size: 28rpx;\n            font-weight: bold;\n        }\n\n        .day-date {\n            font-size: 24rpx;\n            margin-top: 5rpx;\n        }\n    }\n}\n\n.time-slot-container {\n    flex: 1;\n    background: #fff;\n    border-radius: 16rpx;\n    padding: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0,0,0,0.05);\n\n    .loading-container, .empty-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n    }\n\n    .empty-image {\n        width: 200rpx;\n        height: 200rpx;\n        margin-bottom: 20rpx;\n        opacity: .6;\n    }\n\n    .empty-text {\n        font-size: 28rpx;\n        color: #999;\n    }\n\n    .time-slot-grid {\n        display: grid;\n        grid-template-columns: repeat(3, 1fr);\n        gap: 20rpx;\n    }\n\n    .time-slot-item {\n        position: relative;\n        padding: 30rpx 10rpx;\n        border: 1px solid #e5e5e5;\n        border-radius: 16rpx;\n        text-align: center;\n        font-size: 32rpx;\n        background: #fff;\n        transition: all .2s;\n\n        &:active {\n            transform: scale(.98);\n        }\n        &.booked-slot {\n            background: #e8f5e9;\n            border-color: #c8e6c9;\n            color: #2e7d32;\n        }\n        &.cancelled-slot {\n            background: #ffebee;\n            border-color: #ffcdd2;\n            color: #c62828;\n        }\n        &.past-slot {\n            background: #f5f5f5;\n            color: #9e9e9e;\n            border-color: #e0e0e0;\n        }\n    }\n\n    .booked-badge {\n        position: absolute;\n        top: 8rpx;\n        right: 8rpx;\n        background: #30d158;\n        color: #fff;\n        font-size: 20rpx;\n        padding: 4rpx 10rpx;\n        border-radius: 20rpx;\n\n        &.cancelled-badge {\n            background: #f44336;\n        }\n    }\n}\n\n.modal-mask {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0,0,0,.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 1000;\n}\n\n@keyframes modal-appear {\n    from {\n        transform: translateY(50rpx);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n.modal-container {\n    width: 85%;\n    max-width: 600rpx;\n    background: #fff;\n    border-radius: 24rpx;\n    overflow: hidden;\n    box-shadow: 0 10rpx 50rpx rgba(0,0,0,.2);\n    animation: modal-appear .3s ease-out;\n\n    .modal-header {\n        position: relative;\n        padding: 30rpx;\n        text-align: center;\n        border-bottom: 1rpx solid #f0f0f0;\n\n        .modal-title {\n            font-size: 36rpx;\n            font-weight: bold;\n            color: #333;\n        }\n    }\n\n    .modal-content {\n        padding: 30rpx;\n\n        .detail-item {\n            display: flex;\n            align-items: center;\n            margin-bottom: 25rpx;\n        }\n\n        .detail-label {\n            font-size: 28rpx;\n            color: #666;\n            margin: 0 10rpx 0 15rpx;\n            min-width: 140rpx;\n        }\n\n        .detail-value {\n            font-size: 28rpx;\n            color: #333;\n            flex: 1;\n\n            &.phone {\n                color: #007aff;\n                text-decoration: underline;\n            }\n            &.address-text {\n                flex: 1;\n                margin-right: 20rpx;\n                line-height: 1.5;\n            }\n        }\n\n        .remark-container {\n            background: #f9f9f9;\n            border-radius: 12rpx;\n            padding: 20rpx;\n            margin: 15rpx 0 30rpx;\n        }\n\n        .remark-text {\n            font-size: 28rpx;\n            color: #555;\n            line-height: 1.6;\n        }\n    }\n\n    .modal-footer {\n        display: flex;\n        padding: 20rpx 30rpx;\n        border-top: 1rpx solid #f0f0f0;\n        justify-content: center;\n\n        .action-btn {\n            width: 100%;\n            height: 80rpx;\n            line-height: 80rpx;\n            border-radius: 40rpx;\n            font-size: 28rpx;\n        }\n        .cancel-btn {\n            background: #ff4d4f;\n            color: #fff;\n        }\n    }\n}\n\n.nav-btn {\n    padding: 0 25rpx;\n    height: 56rpx;\n    line-height: 56rpx;\n    font-size: 24rpx;\n    background: #007aff;\n    color: #fff;\n    border-radius: 28rpx;\n    margin: 0;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    border: none;\n\n    &::after {\n        border: none;\n    }\n}\n</style>","import MiniProgramPage from 'D:/peng.folder/fengdian-main/fengdian-main/pages/worker-schedule/worker-schedule.vue'\ntt.createPage(MiniProgramPage)"],"names":["ref","onShow","uni","nextTick","uniCloud"],"mappings":"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"}