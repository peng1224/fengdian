{"version":3,"file":"profile.js","sources":["pages/profile/profile.vue","../../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"profile-page\">\n        <template v-if=\"!userinfo._id\">\n            <view class=\"welcome-container\">\n                <view class=\"welcome-content\">\n                    <view class=\"logo-placeholder\">\n                        <uni-icons type=\"paperplane-filled\" size=\"80\" color=\"#007aff\"></uni-icons>\n                    </view>\n                    <text class=\"welcome-title\">欢迎使用</text>\n                    <text class=\"welcome-subtitle\">登录以发现更多精彩内容和服务</text>\n                </view>\n                <button class=\"primary-button login-button\" @click=\"goToLoginPage\">\n                    登录 / 注册\n                </button>\n            </view>\n        </template>\n\n        <template v-else>\n            <view class=\"header-emptybox\">\n                <text class=\"profile-title\">个人中心</text>\n            </view>\n\n            <view class=\"profile-header logged-in\" @click=\"onEditProfile\">\n                <view class=\"avatar-wrapper\">\n                    <image\n                        class=\"avatar\"\n                        :src=\"userinfo.avatar || '/static/images/default-avatar.png'\"\n                        mode=\"aspectFill\"\n                    />\n                    <!-- 仅当身份为 worker 且审核状态为 approved 时显示徽章 -->\n                    <view v-if=\"userinfo.userType === 'worker' && userinfo.technicianApplicationStatus === 'approved'\" class=\"verification-badge\">\n                        <uni-icons type=\"auth-filled\" color=\"#ffffff\" size=\"14\"></uni-icons>\n                    </view>\n                </view>\n                <view class=\"user-info\">\n                    <text class=\"user-name\">{{ userinfo.name || '设置昵称' }}</text>\n                    <text class=\"edit-hint\">查看并编辑个人资料</text>\n                </view>\n                <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"20\" color=\"#c0c4cc\"></uni-icons>\n            </view>\n\n            <!-- 管理员入口 -->\n            <view class=\"action-list\">\n                <view v-if=\"userinfo.userType === 'admin'\" class=\"action-item\" @click=\"goToReviewApplications\">\n                    <uni-icons type=\"checkbox-filled\" size=\"24\" color=\"#ff0852\"></uni-icons>\n                    <view class=\"action-text-wrapper\">\n                        <text class=\"action-text\">审核技工申请</text>\n                        <text class=\"action-subtitle\">管理员审核技工认证申请</text>\n                    </view>\n                    <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                </view>\n                <!-- 新增：审核提现申请入口 -->\n                <view v-if=\"userinfo.userType === 'admin'\" class=\"action-item\" @click=\"goToReviewWithdrawals\">\n                    <uni-icons type=\"wallet-filled\" size=\"24\" color=\"#ff0852\"></uni-icons>\n                    <view class=\"action-text-wrapper\">\n                        <text class=\"action-text\">审核提现申请</text>\n                        <text class=\"action-subtitle\">处理工人提现请求</text>\n                    </view>\n                    <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                </view>\n            </view>\n\n            <!-- 我的预约入口 (已调换位置) -->\n            <view class=\"action-list\">\n                <view class=\"action-item\" @click=\"goToUserSchedule\">\n                    <uni-icons type=\"calendar-filled\" size=\"24\" color=\"#ff9500\"></uni-icons>\n                    <view class=\"action-text-wrapper\">\n                        <text class=\"action-text\">我的预约</text>\n                        <text class=\"action-subtitle\">查看和管理我预约的服务</text>\n                    </view>\n                    <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                </view>\n            </view>\n\n            <!-- 申请成为技工/技工相关入口 (已调换位置) -->\n            <view class=\"action-list\">\n                <block v-if=\"userinfo.userType === 'worker' && userinfo.technicianApplicationStatus === 'approved'\">\n                    <view class=\"action-item\" @click=\"goToWorkerHomepage\">\n                        <uni-icons type=\"person-filled\" size=\"24\" color=\"#007aff\"></uni-icons>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">我的工人主页</text>\n                            <text class=\"action-subtitle\">管理服务项目与个人信息</text>\n                        </view>\n                        <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                    </view>\n                    <view class=\"action-item\" @click=\"goToWorkerSchedule\">\n                        <uni-icons type=\"calendar-filled\" size=\"24\" color=\"#34c759\"></uni-icons>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">我的工单</text>\n                            <text class=\"action-subtitle\">查看和处理客户预约</text>\n                        </view>\n                        <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                    </view>\n                    <!-- 新增提现入口 -->\n                    <view class=\"action-item\" @click=\"goToWithdrawalPage\">\n                        <uni-icons type=\"wallet-filled\" size=\"24\" color=\"#ff9500\"></uni-icons>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">提现</text>\n                            <text class=\"action-subtitle\">申请提现您未结算的金额</text>\n                        </view>\n                        <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                    </view>\n                </block>\n\n                <block v-else-if=\"userinfo.technicianApplicationStatus === 'pending'\">\n                    <view class=\"action-item disabled\">\n                        <view class=\"spinner-container\">\n                            <uni-load-more status=\"loading\" :showText=\"false\" color=\"#999\"></uni-load-more>\n                        </view>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">技工认证审核中</text>\n                            <text class=\"action-subtitle\">我们正在加紧处理您的申请</text>\n                        </view>\n                    </view>\n                </block>\n\n                <block v-else-if=\"userinfo.technicianApplicationStatus === 'rejected'\">\n                    <view class=\"action-item-header\">\n                        <view class=\"status-badge rejected\">\n                            <uni-icons type=\"close-filled\" color=\"#ff3b30\" size=\"16\"></uni-icons>\n                            <text>技工认证被拒绝</text>\n                        </view>\n                    </view>\n                    <view class=\"action-item\" @click=\"goToApplyPage\">\n                        <uni-icons type=\"compose\" size=\"24\" color=\"#ff9500\"></uni-icons>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">重新申请认证</text>\n                            <text class=\"action-subtitle\">查看拒绝原因并修改资料</text>\n                        </view>\n                        <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                    </view>\n                </block>\n\n                <block v-else>\n                    <view class=\"action-item\" @click=\"goToApplyPage\">\n                        <uni-icons type=\"plus-filled\" size=\"24\" color=\"#007aff\"></uni-icons>\n                        <view class=\"action-text-wrapper\">\n                            <text class=\"action-text\">申请成为技工</text>\n                            <text class=\"action-subtitle\">发布您的技能，开始接单</text>\n                        </view>\n                        <uni-icons class=\"arrow-icon\" type=\"forward\" size=\"18\" color=\"#c0c4cc\"></uni-icons>\n                    </view>\n                </block>\n            </view>\n\n            <view class=\"action-list\">\n                <view class=\"action-item danger\" @click=\"exitLogin\">\n                    <text class=\"action-text\">退出登录</text>\n                </view>\n            </view>\n        </template>\n    </view>\n</template>\n\n<script setup>\r\nimport { onShareAppMessage, onShareTimeline } from '@dcloudio/uni-app'\nimport { ref } from 'vue';\nimport Footer from '../footer.vue';\nimport { onShow } from '@dcloudio/uni-app';\n\nconst userinfo = ref({});\n\nonShow(() => {\n    const info = uni.getStorageSync('userinfo');\n    userinfo.value = info && info._id ? info : {};\n});\n\nfunction goToLoginPage() {\n    uni.navigateTo({ url: '/pages/login/login' });\n}\n\nfunction exitLogin() {\n    uni.showModal({\n        title: '提示',\n        content: '确认退出？',\n        success: (res) => {\n            if (res.confirm) {\n                uni.removeStorageSync('userinfo');\n                userinfo.value = {};\n            }\n        }\n    });\n}\n\n// 跳转到提现页面\nfunction goToWithdrawalPage() {\n    uni.navigateTo({ url: '/pages/Payouts/Payouts' });\n}\n\nfunction goToWorkerHomepage() {\n    uni.navigateTo({ url: '/pages/Homepage/Homepage' });\n}\n\nfunction goToWorkerSchedule() {\n    uni.navigateTo({ url: '/pages/worker-schedule/worker-schedule' });\n}\n\nfunction goToApplyPage() {\n    uni.navigateTo({ url: '/pages/applyTechnician/applyTechnician' });\n}\n\nfunction onEditProfile() {\n    uni.navigateTo({ url: '/pages/EditProfile/EditProfile' });\n}\n\nfunction goToUserSchedule() {\n    uni.navigateTo({ url: '/pages/user-schedule/user-schedule' });\n}\n\n// 【新增】管理员审核入口方法\nfunction goToReviewApplications() {\n    uni.navigateTo({ url: '/pages/admin/ReviewApplications/ReviewApplications' });\n}\n\n// 【新增】管理员审核提现申请入口方法\nfunction goToReviewWithdrawals() {\n    uni.navigateTo({ url: '/pages/admin/ReviewWithdrawals/ReviewWithdrawals' }); // 新页面的路径\n}\r\n\r\nonShareAppMessage(() => {\r\n  return {\r\n    title: '蜂点到家 - 本地靠谱的家政技工平台',\r\n    path: '/pages/index/index'\r\n  }\r\n})\r\n\r\nonShareTimeline(() => {\r\n  return {\r\n    title: '蜂点到家 - 快速预约本地服务'\r\n  }\r\n})\n</script>\n\n<style lang=\"scss\" scoped>\n// 主题色定义\n$background-color: #f8f9fa;\n$card-background-color: #ffffff;\n$primary-text-color: #1c1c1e;\n$secondary-text-color: #8a8a8e;\n$primary-action-color: #007aff;\n$success-color: #34c759;\n$warning-color: #ff9500;\n$danger-color: #ff3b30;\n$separator-color: #e5e5ea;\n\n\n// 页面根容器\n.profile-page {\n    background-color: $background-color;\n    min-height: calc(100vh - 50px); // 减去底部导航栏高度\n    width: 100%;\n    padding-bottom: 50px; // 防止内容被Footer遮挡\n}\n\n// ====================================================\n// 未登录页面 (全新)\n// ====================================================\n.welcome-container {\n\ttransform: translateY(50rpx); // ✅ 整体下移\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between;\n    height: calc(100vh - 50px); // 占满整个屏幕\n    padding: 15vh 50rpx 10vh;\n    box-sizing: border-box;\n}\n\n.welcome-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n}\n\n.logo-placeholder {\n    width: 230rpx;\n    height: 230rpx;\n    border-radius: 50%;\n    background-color: #e9e9eb;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\tmargin-top: 30rpx;\n    margin-bottom: 40rpx;\n    uni-icons {\n        opacity: 0.8;\n    }\n}\n\n.welcome-title {\n    font-size: 48rpx;\n    font-weight: 600;\n    color: $primary-text-color;\n    margin-bottom: 16rpx;\n}\n\n.welcome-subtitle {\n    font-size: 30rpx;\n    color: $secondary-text-color;\n    max-width: 80%;\n}\n\n.login-button {\n    width: 80%;\n    height: 96rpx;\n    line-height: 96rpx;\n    border-radius: 48rpx;\n    background-color: $primary-action-color;\n    color: #fff;\n    font-size: 34rpx;\n    font-weight: 500;\n    border: none;\n\tmargin-bottom: 180rpx; // ✅ 关键：向上挤压\n    &:after {\n        border: none;\n    }\n}\n\n\n// ====================================================\n// 已登录页面\n// ====================================================\n.header-emptybox {\n  width: 100%;\n  height: 230rpx;\n  background-color: #f2f2f7;  \n  position: relative; // 必须加这个，才能让子元素绝对定位生效\n}\n.profile-title {\n  position: absolute;           // ✅ 缺失的关键属性\n  font-size: 55rpx;           // 字体大\n  font-weight: 580;           // 半粗体，接近 Airbnb 标题\n  color: #1c1c1e;            // 深灰，比纯黑柔和\n  font-family: \"Helvetica Neue\", \"PingFang SC\", \"Helvetica\", \"Arial\", sans-serif; // Airbnb 常用字体替代\n  top: 130rpx;                // ✅ 从容器顶部下移 50rpx\n  left: 35rpx;\n}\n.profile-header {\n    display: flex;\n    align-items: center;\n    padding: 40rpx;\n    background-color: $card-background-color;\n    margin-bottom: 20rpx;\n    border-radius: 50rpx;\n    &.logged-in {\n        cursor: pointer;\n        transition: background-color 0.2s;\n        &:active {\n            background-color: #f0f0f0;\n        }\n    }\n}\n\n.avatar-wrapper {\n    position: relative; // 为徽章定位\n    width: 140rpx;\n    height: 140rpx;\n    border-radius: 50%;\n    overflow: visible; // 允许徽章溢出\n    margin-right: 30rpx;\n    flex-shrink: 0;\n\n    .avatar {\n        width: 100%;\n        height: 100%;\n        border-radius: 50%;\n        border: 1px solid #eee;\n    }\n}\n\n// 【新增】认证徽章样式\n.verification-badge {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    width: 44rpx;\n    height: 44rpx;\n    background: $success-color;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 4rpx solid #ffffff; // 白色描边，使其与头像分离\n    box-sizing: border-box;\n}\n\n.user-info {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n.user-name {\n    font-size: 44rpx;\n    font-weight: 600;\n    color: $primary-text-color;\n    margin-bottom: 8rpx;\n}\n.edit-hint {\n    font-size: 28rpx;\n    color: $secondary-text-color;\n}\n\n// 功能列表\n.action-list {\n    background-color: $card-background-color;\n    border-radius: 20rpx;\n    margin: 0 24rpx 30rpx;\n    overflow: hidden;\n}\n\n.action-item {\n    display: flex;\n    align-items: center;\n    padding: 24rpx 30rpx; // 增加垂直内边距\n    min-height: 120rpx;  // 保证最小高度\n    box-sizing: border-box;\n    background-color: $card-background-color;\n    position: relative;\n    cursor: pointer;\n    transition: background-color 0.2s;\n    \n    &:not(:last-child)::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        right: 0;\n        left: 120rpx; // 左侧缩进，对齐文字\n        height: 1px;\n        background-color: $separator-color;\n        transform: scaleY(0.5);\n    }\n    \n    &:active {\n        background-color: #f0f0f0;\n    }\n\n    &.disabled {\n        color: $secondary-text-color;\n        cursor: default;\n        &:active {\n            background-color: $card-background-color;\n        }\n    }\n\n    &.danger {\n        justify-content: center; // 文字居中\n        .action-text {\n            color: $danger-color;\n            flex: none;\n            margin: 0;\n        }\n    }\n}\n\n.action-text-wrapper {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    margin-left: 30rpx;\n    gap: 4rpx;\n}\n\n.action-text {\n    font-size: 32rpx;\n    color: $primary-text-color;\n    font-weight: 500; // 加粗\n}\n\n.action-subtitle {\n    font-size: 26rpx;\n    color: $secondary-text-color;\n}\n\n.arrow-icon {\n    margin-left: auto;\n}\n\n.spinner-container {\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.action-item-header {\n    padding: 20rpx 30rpx;\n    display: flex;\n    border-bottom: 1px solid $separator-color;\n}\n\n.status-badge {\n    padding: 8rpx 20rpx;\n    border-radius: 30rpx;\n    font-size: 24rpx;\n    display: inline-flex;\n    align-items: center;\n    gap: 10rpx;\n    font-weight: 500;\n\n    &.rejected {\n        background-color: #fff0f0;\n        color: $danger-color;\n        uni-icons {\n            color: $danger-color !important;\n        }\n    }\n}\n</style>\n","import MiniProgramPage from 'D:/peng.folder/fengdian-main/蜂点到家/pages/profile/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onShow","uni","onShareAppMessage","onShareTimeline"],"mappings":";;;;;;;;;;;;;;;AAgKA,UAAA,WAAAA,cAAAA,IAAA,CAAA,CAAA;AAEAC,kBAAAA,OAAA,MAAA;AACA,YAAA,OAAAC,cAAAA,MAAA,eAAA,UAAA;AACA,eAAA,QAAA,QAAA,KAAA,MAAA,OAAA;IACA,CAAA;AAEA,aAAA,gBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,qBAAA,CAAA;AAAA,IACA;AAEA,aAAA,YAAA;AACAA,oBAAAA,MAAA,UAAA;AAAA,QACA,OAAA;AAAA,QACA,SAAA;AAAA,QACA,SAAA,CAAA,QAAA;AACA,cAAA,IAAA,SAAA;AACAA,gCAAA,kBAAA,UAAA;AACA,qBAAA,QAAA;UACA;AAAA,QACA;AAAA,MACA,CAAA;AAAA,IACA;AAGA,aAAA,qBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,yBAAA,CAAA;AAAA,IACA;AAEA,aAAA,qBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,2BAAA,CAAA;AAAA,IACA;AAEA,aAAA,qBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,yCAAA,CAAA;AAAA,IACA;AAEA,aAAA,gBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,yCAAA,CAAA;AAAA,IACA;AAEA,aAAA,gBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,iCAAA,CAAA;AAAA,IACA;AAEA,aAAA,mBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,qCAAA,CAAA;AAAA,IACA;AAGA,aAAA,yBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,qDAAA,CAAA;AAAA,IACA;AAGA,aAAA,wBAAA;AACAA,oBAAAA,MAAA,WAAA,EAAA,KAAA,mDAAA,CAAA;AAAA,IACA;AAEAC,kBAAAA,kBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,MAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,MACA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrOA,GAAG,WAAW,eAAe;"}